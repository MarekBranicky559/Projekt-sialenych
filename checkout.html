<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <title>Pokladňa - Pivnice</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .checkout-container { max-width: 800px; margin: 50px auto; background: rgba(20,20,20,0.95); padding: 30px; border-radius: 15px; border: 2px solid #2ecc71; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border-radius: 5px; border: 1px solid #2ecc71; background: #000; color: white; }
    </style>
</head>
<body>
    <div class="checkout-container">
        <h1>Vaša Objednávka</h1>
        <div id="summary" style="margin-bottom: 20px;"></div>
        <hr style="border-color:#2ecc71; margin-bottom: 20px;">
        
        <form id="checkout-form">
            <div class="form-group">
                <label>Meno a Priezvisko</label>
                <input type="text" id="name" required>
            </div>
            <div class="form-group">
                <label>E-mail</label>
                <input type="email" id="email" required>
            </div>
            <div class="form-group">
                <label>Doručenie</label>
                <select id="shipping" required>
                    <option value="packeta">Packeta (Zásielkovňa)</option>
                    <option value="kurier">Kuriér na adresu</option>
                    <option value="osobne">Osobný odber</option>
                </select>
            </div>
            <div class="form-group">
                <label>Platba</label>
                <select id="payment" required>
                    <option value="apple">Apple Pay / Google Pay</option>
                    <option value="karta">Platobná karta</option>
                    <option value="dobierka">Dobierka</option>
                </select>
            </div>
            <button type="submit" style="background:#2ecc71; color:white; border:none; padding:15px; width:100%; font-size:1.2em; cursor:pointer; border-radius:10px;">POTVRDIŤ NÁKUP</button>
        </form>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const cart = JSON.parse(sessionStorage.getItem('e-shop-cart')) || [];
            const user = JSON.parse(localStorage.getItem('loggedUser'));
            const summary = document.getElementById('summary');
            let total = 0;

            if(user) {
                document.getElementById('name').value = user.name;
                document.getElementById('email').value = user.email;
            }

            cart.forEach(item => {
                total += item.price;
                summary.innerHTML += `<p>${item.name} - ${item.price.toFixed(2)} €</p>`;
            });
            summary.innerHTML += `<h3>Celkom: ${total.toFixed(2)} €</h3>`;
        });

        document.getElementById('checkout-form').onsubmit = (e) => {
            e.preventDefault();
            alert("Objednávka bola prijatá!");
            sessionStorage.removeItem('e-shop-cart');
            window.location.href = "index.html";
        };
    </script>
</body>
</html>